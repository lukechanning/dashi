<div class="flex items-center justify-between mb-6">
  <div>
    <h1 class="text-2xl font-bold">Today</h1>
    <p class="text-sm text-gray-500"><%= Date.current.strftime("%A, %B %-d, %Y") %></p>
  </div>
  <%= link_to "Add todo", new_todo_path(due_date: Date.current), class: "bg-blue-600 text-white rounded-lg px-4 py-2 text-sm font-medium hover:bg-blue-700" %>
</div>

<% if @overdue_todos.any? %>
  <div class="mb-6">
    <h2 class="text-sm font-semibold text-amber-700 mb-2">Carried over</h2>
    <div class="space-y-2">
      <% @overdue_todos.each do |todo| %>
        <div class="flex items-center gap-3 bg-amber-50 rounded-lg border border-amber-200 p-3">
          <%= button_to toggle_todo_path(todo), method: :patch, class: "flex-shrink-0" do %>
            <div class="w-5 h-5 rounded border-2 border-amber-400 hover:border-amber-500 cursor-pointer"></div>
          <% end %>
          <div class="flex-1">
            <span class="text-gray-900"><%= todo.title %></span>
            <% if todo.project %>
              <span class="text-xs text-gray-400 ml-2"><%= todo.project.title %></span>
            <% end %>
          </div>
          <span class="text-xs text-amber-600"><%= todo.due_date.strftime("%b %-d") %></span>
          <div class="flex items-center gap-1">
            <%= button_to "Today", todo_path(todo), method: :patch,
                params: { todo: { due_date: Date.current } },
                class: "text-xs text-blue-600 hover:text-blue-800 cursor-pointer" %>
            <%= link_to "Edit", edit_todo_path(todo), class: "text-xs text-gray-400 hover:text-gray-600" %>
          </div>
        </div>
      <% end %>
    </div>
  </div>
<% end %>

<% if @todos.any? %>
  <div class="space-y-2">
    <% @todos.each do |todo| %>
      <div class="flex items-center gap-3 bg-white rounded-lg border border-gray-200 p-3">
        <%= button_to toggle_todo_path(todo), method: :patch, class: "flex-shrink-0" do %>
          <div class="w-5 h-5 rounded border-2 flex items-center justify-center cursor-pointer
            <%= todo.complete? ? 'bg-blue-600 border-blue-600' : 'border-gray-300 hover:border-gray-400' %>">
            <% if todo.complete? %>
              <svg class="w-3 h-3 text-white" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="3">
                <path stroke-linecap="round" stroke-linejoin="round" d="M5 13l4 4L19 7" />
              </svg>
            <% end %>
          </div>
        <% end %>
        <div class="flex-1">
          <span class="<%= todo.complete? ? 'line-through text-gray-400' : 'text-gray-900' %>">
            <%= todo.title %>
          </span>
          <% if todo.project %>
            <span class="text-xs text-gray-400 ml-2"><%= todo.project.title %></span>
          <% end %>
        </div>
        <%= link_to "Edit", edit_todo_path(todo), class: "text-xs text-gray-400 hover:text-gray-600" %>
      </div>
    <% end %>
  </div>
<% else %>
  <% unless @overdue_todos.any? %>
    <div class="text-center py-12 text-gray-500">
      <p>Nothing on the list for today. Enjoy your day!</p>
    </div>
  <% end %>
<% end %>
